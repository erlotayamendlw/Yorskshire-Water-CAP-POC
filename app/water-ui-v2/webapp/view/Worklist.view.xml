<mvc:View
    controllerName="wateruiv2.controller.Worklist"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:vbm="sap.ui.vbm"
    xmlns:l="sap.ui.layout"
    xmlns="sap.m"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
	xmlns:smartTable="sap.ui.comp.smarttable">
    <Page
        id="page"
        title="{i18n>title}"
        class="sapMShellGlobalOuterBackground">
        <l:FixFlex
            id="fixFlex1"
            class="fixFlexHorizontal"
            vertical="false">
            <l:flexContent>
                <IconTabBar
                    id="iconTabBar"
                    select=".onFilterSelect"
                    expandable="false">
                    <items>
                        <IconTabFilter
                            id="iconTF1"
                            key="all"
                            showAll="true"
                            count="{worklistView>/countAll}"
                            text="Count"
                        />
                        <IconTabSeparator id="iconSep1" />
                        <IconTabFilter
                            id="iconTF2"
                            key="nofault"
                            icon="sap-icon://message-success"
                            iconColor="Positive"
                            count="{worklistView>/inStock}"
                            text="{i18n>No Fault}"
                        />
                        <IconTabFilter
                            id="iconTF3"
                            key="unsure"
                            icon="sap-icon://message-warning"
                            iconColor="Critical"
                            count="{worklistView>/shortage}"
                            text="{i18n>Unsure}"
                        />
                        <IconTabFilter
                            id="iconTF4"
                            key="fault"
                            icon="sap-icon://message-error"
                            iconColor="Negative"
                            count="{worklistView>/outOfStock}"
                            text="{i18n>Fault}"
                        />
                    </items>
                    <content>
                         <!-- <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                            <fb:filterGroupItems>
                                <fb:FilterGroupItem id="_IDGenFilterGroupItem1" name="Maintenance ID" label="Maintenance ID" groupName="Group1" visibleInFilterBar="true">
                                    <fb:control>
                                        <MultiComboBox id="_IDGenMultiComboBox"
                                            name="Maintenance ID"
                                            selectionChange=".onSelectionChange"
                                            items="{
                                                path: '/Notification',
                                                sorter: { path: 'MaintenanceNotification' },
                                                templateShareable: true
                                            }"
                                        >
                                            <core:Item id="_IDGenItem" key="{MaintenanceNotification}" text="{MaintenanceNotification}"/>
                                        </MultiComboBox>
                                    </fb:control>
                                </fb:FilterGroupItem>
                                 <fb:FilterGroupItem id="_IDGenFilterGroupItem2" name="Date" label="Date" groupName="Group2" visibleInFilterBar="true">
                                    <fb:control>
                                        <MultiComboBox id="_IDGenMultiComboBox2"
                                            name="Date"
                                            selectionChange=".onSelectionChange"
                                            items="{
                                                path: '/Notification',
                                                sorter: { path: 'MalfunctionStartDate' },
                                                templateShareable: true
                                            }"
                                        >
                                            <core:Item id="_IDGenItem2" key="{MalfunctionStartDate}" text="{MalfunctionStartDate}"/>
                                        </MultiComboBox>
                                    </fb:control>
                                </fb:FilterGroupItem>
                            </fb:filterGroupItems>
                        </fb:FilterBar>
                        <Table
                            id="idProductsTable"
                            inset="false"
                            items="{
                                path: '/Notification',
                                sorter: {
                                    path: 'CreationDate'
                                },
                                parameters: {
                                    'expand': 'NotificationMedia'
                                }
                            }">
                            <headerToolbar>
                                <Toolbar id="toolbar1">
                                    <Title
                                        id="tableHeader"
                                        text="{worklistView>/worklistTableTitle}"
                                    />
                                    <ToolbarSpacer id="toolbarSpacer1" />
                                    <SearchField
                                        id="searchField"
                                        tooltip="{i18n>worklistSearchTooltip}"
                                        search=".onSearch"
                                        width="auto"
                                    />
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column
                                    id="column1"
                                    width="12em"
                                >
                                    <Text
                                        id="text1"
                                        text="Notification ID"
                                    />
                                </Column>
                                <Column
                                    id="column2"
                                    minScreenWidth="Tablet"
                                    demandPopin="true"
                                >
                                    <Text
                                        id="text2"
                                        text="Description"
                                    />
                                </Column>
                                <Column
                                    id="column3"
                                    minScreenWidth="Desktop"
                                    demandPopin="true"
                                    hAlign="End"
                                >
                                    <Text
                                        id="text3"
                                        text="Location"
                                    />
                                </Column>
                                <Column
                                    id="column4"
                                    minScreenWidth="Desktop"
                                    demandPopin="true"
                                    hAlign="Center"
                                >
                                    <Text
                                        id="text4"
                                        text="Date"
                                    />
                                </Column>
                                <Column
                                    id="column5"
                                    hAlign="End"
                                >
                                    <Text
                                        id="text5"
                                        text="URL"
                                    />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem
                                    id="columnListItem1"
                                    vAlign="Middle"
                                    type="Navigation"
                                    press=".onPress"
                                >
                                    <cells>
                                        <ObjectIdentifier
                                            id="ObjectIdentifier1"
                                            text="{MaintenanceNotification}"
                                        />
                                        <Text
                                            id="text6"
                                            text="{NotificationText}"
                                        />
                                        <Text
                                            id="text7"
                                            text="{FunctionalLocation}"
                                        />
                                        <Text
                                            id="text8"
                                            text="{MalfunctionStartDate}"
                                        />
                                        <Text
                                            id="text9"
                                            text="{VideoURL}"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table> -->

                        <smartFilterBar:SmartFilterBar id="smartFilterBar" entitySet="Notification" persistencyKey="SmartFilter_Explored" basicSearchFieldName="NotificationText" enableBasicSearch="true" >
                            <smartFilterBar:layoutData>
                                <FlexItemData id="_IDGenFlexItemData1" shrinkFactor="0"/>
                            </smartFilterBar:layoutData>
                        </smartFilterBar:SmartFilterBar>
                        <smartTable:SmartTable id="LineItemsSmartTable" entitySet="Notification" 
                        smartFilterId="smartFilterBar" tableType="ResponsiveTable" enableExport="true" 
                        beforeExport="onBeforeExport" useVariantManagement="true" useTablePersonalisation="true"
                         header="Maintenance Notifications" showRowCount="true" persistencyKey="SmartTableAnalytical_Explored" 
                         enableAutoBinding="true" class="sapUiResponsiveContentPadding" enableAutoColumnWidth="true" 
                         editTogglable="true" >
                             <Table id="_IDGenTable1" selectionChange="onPressWorkItem" mode="SingleSelectMaster"> 
                            </Table>
                            <!-- layout data used to make the table growing but the filter bar fixed -->
                            <smartTable:layoutData>
                                <FlexItemData id="_IDGenFlexItemData" growFactor="1" baseSize="0%"/>
                            </smartTable:layoutData>
                        </smartTable:SmartTable>
                    </content>
                </IconTabBar>    
            </l:flexContent>
        </l:FixFlex>
    </Page>
</mvc:View>
